---
/**
 * Homepage - Main landing page with all sections
 */
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/home/Hero.astro';
import USPs from '../components/home/USPs.astro';
import Highlights from '../components/home/Highlights.astro';
import UpcomingEvents from '../components/home/UpcomingEvents.astro';
import { getHomepage, getGlobalSettings } from '../lib/cms';
import { generateLocalBusinessSchema } from '../lib/seo';

const homepage = await getHomepage();
const settings = await getGlobalSettings();

// Generate schema.org data (returns array of Organization and SportsActivityLocation)
const schema = settings ? generateLocalBusinessSchema(settings) : null;
---

<BaseLayout
  title="Pszczyńska Akademia Sztuk Walki - Kung-Fu, Jiu-Jitsu, Systema"
  description="Pszczyńska Akademia Sztuk Walki (PASW) - treningi kung-fu, jiu-jitsu, systema i walki wręcz dla dzieci, młodzieży i dorosłych. Licencjonowani trenerzy, tradycja od 1957 roku."
  image="/images/pasw-sztuki-walki-og.jpg"
  schema={schema}
>
  {homepage && (
    <>
      {/* Screen reader only H1 for semantic structure and SEO */}
      <h1 class="sr-only">Pszczyńska Akademia Sztuk Walki - Treningi kung-fu, jiu-jitsu i systema w Pszczynie</h1>
      
      <Hero
        title={homepage.heroTitle}
        subtitle={homepage.heroSubtitle}
        ctaPrimaryLabel={homepage.heroCtaPrimaryLabel}
        ctaPrimaryUrl={homepage.heroCtaPrimaryUrl}
        ctaSecondaryLabel={homepage.heroCtaSecondaryLabel}
        ctaSecondaryUrl={homepage.heroCtaSecondaryUrl}
      />

      <USPs usps={homepage.usps} />

      <Highlights highlights={homepage.highlights} />

      <UpcomingEvents />
    </>
  )}
</BaseLayout>
