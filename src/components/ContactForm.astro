---
/**
 * Contact Form (static for now, ready for backend integration)
 * TODO: Add backend handling (Resend, hCaptcha, etc.)
 */
---

<form 
  class="space-y-6" 
  data-contact-form
  aria-label="Formularz kontaktowy"
>
  <!-- Name -->
  <div>
    <label for="name" class="block text-sm font-semibold text-white mb-2">
      Imię i nazwisko <span class="text-primary">*</span>
    </label>
    <input
      type="text"
      id="name"
      name="name"
      required
      class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-300"
      placeholder="Jan Kowalski"
    />
  </div>

  <!-- Email -->
  <div>
    <label for="email" class="block text-sm font-semibold text-white mb-2">
      Email <span class="text-primary">*</span>
    </label>
    <input
      type="email"
      id="email"
      name="email"
      required
      class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-300"
      placeholder="jan@example.com"
    />
  </div>

  <!-- Phone -->
  <div>
    <label for="phone" class="block text-sm font-semibold text-white mb-2">
      Telefon
    </label>
    <input
      type="tel"
      id="phone"
      name="phone"
      class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-300"
      placeholder="+48 123 456 789"
    />
  </div>

  <!-- Subject -->
  <div>
    <label for="subject" class="block text-sm font-semibold text-white mb-2">
      Temat <span class="text-primary">*</span>
    </label>
    <input
      type="text"
      id="subject"
      name="subject"
      required
      class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-300"
      placeholder="Zapytanie o treningi"
    />
  </div>

  <!-- Message -->
  <div>
    <label for="message" class="block text-sm font-semibold text-white mb-2">
      Wiadomość <span class="text-primary">*</span>
    </label>
    <textarea
      id="message"
      name="message"
      rows="5"
      required
      class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none transition-all duration-300"
      placeholder="Twoja wiadomość..."
    ></textarea>
  </div>

  <!-- Privacy policy consent -->
  <div class="flex items-start">
    <input
      type="checkbox"
      id="privacy"
      name="privacy"
      required
      class="mt-1 w-4 h-4 text-primary bg-gray-800 border-gray-700 rounded focus:ring-2 focus:ring-primary"
    />
    <label for="privacy" class="ml-3 text-sm text-gray-400">
      Akceptuję <a href="/polityka-prywatnosci" class="text-primary hover:underline focus:outline-primary">politykę prywatności</a> i wyrażam zgodę na przetwarzanie moich danych osobowych <span class="text-primary">*</span>
    </label>
  </div>

  <!-- Submit button -->
  <div>
    <button
      type="submit"
      class="btn btn-primary w-full"
      data-submit-button
    >
      Wyślij wiadomość
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="2"
        stroke="currentColor"
        class="w-5 h-5 ml-2 transition-transform duration-300 group-hover:translate-x-1"
        aria-hidden="true"
      >
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
      </svg>
    </button>
  </div>

  <!-- Status messages -->
  <div 
    id="form-status" 
    class="hidden p-4 rounded-lg text-sm"
    role="alert"
    aria-live="polite"
  ></div>
</form>

<script>
  // Contact form handling (placeholder)
  // TODO: Implement backend submission (Resend, hCaptcha, etc.)
  
  const form = document.querySelector('[data-contact-form]') as HTMLFormElement;
  const submitButton = document.querySelector('[data-submit-button]') as HTMLButtonElement;
  const statusDiv = document.getElementById('form-status');

  if (form && submitButton && statusDiv) {
    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      // Disable button
      submitButton.disabled = true;
      submitButton.textContent = 'Wysyłanie...';

      try {
        // TODO: Replace with actual backend endpoint
        // For now, simulate success
        await new Promise(resolve => setTimeout(resolve, 1500));

        // Show success message
        statusDiv.className = 'block p-4 rounded-lg text-sm bg-green-900/50 border border-green-700 text-green-300';
        statusDiv.textContent = 'Dziękujemy! Wiadomość została wysłana. Skontaktujemy się z Tobą wkrótce.';
        
        // Reset form
        form.reset();

        // Hide message after 5 seconds
        setTimeout(() => {
          statusDiv.className = 'hidden';
        }, 5000);

      } catch (error) {
        // Show error message
        statusDiv.className = 'block p-4 rounded-lg text-sm bg-red-900/50 border border-red-700 text-red-300';
        statusDiv.textContent = 'Ups! Coś poszło nie tak. Spróbuj ponownie lub skontaktuj się z nami bezpośrednio.';
      } finally {
        // Re-enable button
        submitButton.disabled = false;
        submitButton.textContent = 'Wyślij wiadomość';
      }
    });
  }
</script>

